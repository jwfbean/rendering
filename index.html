<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Query Latency Comparison</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f5f5;
            color: #333;
        }
        
        .header {
            text-align: center;
            background: white;
            padding: 60px 40px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 20px;
            color: #1a1a1a;
        }
        
        .header p {
            font-size: 1.2em;
            color: #666;
        }
        
        .container {
            max-width: 1200px;
            margin: 40px auto;
            padding: 0 20px;
        }
        
        .chart-section {
            background: white;
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .chart-title {
            text-align: center;
            font-size: 1.5em;
            margin-bottom: 40px;
            color: #1a1a1a;
        }
        
        /* Bars and content in same space */
        .chart-content-wrapper {
            position: relative;
            min-height: 12000px;
        }
        
        .bars-row {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            width: 100%;
            pointer-events: none;
        }
        
        .bar-group {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .bar-pair {
            display: flex;
            gap: 8px;
            align-items: flex-end;
            margin-bottom: 15px;
        }
        
        .bar {
            width: 40px;
            border-radius: 4px 4px 0 0;
        }
        
        .min-bar {
            background: #3b82f6;
        }
        
        .max-bar {
            background: #ef4444;
        }
        
        /* Tiger Cloud - tiny bars */
        .tiger .min-bar {
            height: 3px;
        }
        
        .tiger .max-bar {
            height: 5px;
        }
        
        /* Azure + TimescaleDB */
        .timescale .min-bar {
            height: 100px;
        }
        
        .timescale .max-bar {
            height: 500px;
        }
        
        /* Vanilla - THE MASSIVE ONE */
        .vanilla .min-bar {
            height: 700px;
        }
        
        .vanilla .max-bar {
            height: 12000px;
        }
        
        .bar-label {
            text-align: center;
            font-weight: 600;
            font-size: 0.9em;
            margin-top: 10px;
            line-height: 1.3;
        }
        
        .bar-stats {
            text-align: center;
            font-size: 0.8em;
            color: #666;
            margin-top: 5px;
        }
        
        /* Content flows in the same space as bars */
        .content-area {
            max-width: 800px;
            margin: 0 auto;
            position: relative;
            z-index: 10;
            padding-top: 40px;
        }
        
        .content-area h2 {
            font-size: 1.8em;
            margin-bottom: 20px;
            color: #1a1a1a;
        }
        
        .content-area h3 {
            font-size: 1.3em;
            margin: 30px 0 15px;
            color: #0066cc;
        }
        
        .content-area p {
            font-size: 1.05em;
            line-height: 1.7;
            margin-bottom: 15px;
            color: #444;
        }
        
        .metric-box {
            background: #f0f9ff;
            padding: 20px;
            border-radius: 6px;
            margin: 20px 0;
            border-left: 4px solid #0066cc;
        }
        
        .metric-box h4 {
            font-size: 1.1em;
            margin-bottom: 10px;
            color: #0066cc;
        }
        
        .metric-box p {
            margin: 5px 0;
            font-size: 0.95em;
        }
        
        .legend {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 2px solid #e5e5e5;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .legend-box {
            width: 20px;
            height: 20px;
            border-radius: 3px;
        }
        
        .progress-indicator {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: #e5e5e5;
            z-index: 1001;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #0066cc, #00cc66);
            width: 0%;
            transition: width 0.1s;
        }
        
        .scroll-hint {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #0066cc;
            color: white;
            padding: 15px 25px;
            border-radius: 30px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            font-weight: 600;
            animation: pulse 2s infinite;
            z-index: 1000;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .milestone {
            text-align: center;
            background: rgba(239, 68, 68, 0.1);
            padding: 40px;
            margin: 200px 0;
            border-radius: 8px;
            border: 2px solid #ef4444;
        }
        
        .milestone h3 {
            font-size: 1.5em;
            color: #ef4444;
            margin-bottom: 10px;
        }
        
        .milestone p {
            font-size: 1.1em;
            color: #666;
        }
        
        .final-section {
            text-align: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 80px 40px;
            margin: 60px 0;
            border-radius: 8px;
        }
        
        .final-section h2 {
            font-size: 2.5em;
            margin-bottom: 20px;
        }
        
        .final-section p {
            font-size: 1.3em;
            margin: 15px 0;
        }
        
        .final-section .cta {
            display: inline-block;
            background: white;
            color: #667eea;
            padding: 15px 40px;
            margin-top: 30px;
            border-radius: 6px;
            text-decoration: none;
            font-weight: 600;
            font-size: 1.1em;
        }
        
        .final-section .cta:hover {
            background: #f0f0f0;
        }
    </style>
</head>
<body>
    <div class="progress-indicator">
        <div class="progress-bar" id="progressBar"></div>
    </div>
    
    <div class="scroll-hint" id="scrollHint">
        Keep scrolling... ‚¨áÔ∏è
    </div>
    
    <div class="header">
        <h1>Query Latency Comparison</h1>
        <p>The same query. The same data. Three very different experiences.</p>
    </div>
    
    <div class="container">
        <div class="chart-section">
            <h2 class="chart-title">Query Latency (seconds)</h2>
            
            <div class="chart-content-wrapper">
                <!-- Bars spanning full width of the white section -->
                <div class="bars-row">
                    <div class="bar-group tiger">
                        <div class="bar-pair">
                            <div class="bar min-bar"></div>
                            <div class="bar max-bar"></div>
                        </div>
                        <div class="bar-label">Tiger<br>Cloud</div>
                        <div class="bar-stats">4-6ms</div>
                    </div>
                    
                    <div class="bar-group timescale">
                        <div class="bar-pair">
                            <div class="bar min-bar"></div>
                            <div class="bar max-bar"></div>
                        </div>
                        <div class="bar-label">Azure +<br>TimescaleDB</div>
                        <div class="bar-stats">1-5s</div>
                    </div>
                    
                    <div class="bar-group vanilla">
                        <div class="bar-pair">
                            <div class="bar min-bar"></div>
                            <div class="bar max-bar"></div>
                        </div>
                        <div class="bar-label">Vanilla<br>Azure</div>
                        <div class="bar-stats">7-120s</div>
                    </div>
                </div>
                
                <!-- Content flows IN the same space as the bars -->
                <div class="content-area">
                    <h2>Benchmark Details: RTABench on Azure</h2>

<p>RTABench, a real-time analytics benchmark, measures the ability of a transactional database to handle analytic queries, traditionally thought of as an antipattern. The benchmark uses a normalized schema that reflects how most applications store and manage data. It endeavors to measure how well databases handle real-time analytic queries that require joins and filtering‚Äîa scenario missing from other analytics benchmarks.</p>

<p>RTABench includes a dataset with ~171 million events that is large enough to run performance benchmarks but lightweight enough to set up easily and quickly. The benchmark includes 1,102 customers, 9,255 products and 10,010,342 orders, ensuring RTABench can test query performance under realistic application workloads while remaining scalable for different database configurations.</p>

<p>Where available, RTABench leverages TimescaleDB features such as hypertables, continuous aggregates, compression, columnar storage, and so on. So TimescaleDB is expected to outperform vanilla Postgres by a lot. Even so, an RTABench result does illustrate the benefits of Tiger Cloud in Azure and puts contrasts with the other data infrastructure available with Azure in stark relief.</p>

<h3>We ran RTABench on three different postgres services on Azure:</h3>

<div class="metric-box">
    <h4>Tiger Cloud on Azure</h4>
</div>

<img src="images/tiger-cloud-azure.png" alt="Tiger Cloud service selection interface">

<div class="metric-box">
    <h4>Azure Database for Postgres</h4>
</div>

<img src="images/image2.png" alt="Azure Database for Postgres connection details">
<img src="images/image3.png" alt="Azure Database compute and storage configuration">

<div class="metric-box">
    <h4>Azure Database for Postgres with the TimescaleDB extension enabled</h4>
</div>

<p>Because we were working with a pre-release version of Tiger Cloud and we were anticipating having to debug as we go, we replaced the Terraform invocation with a manual setup process, and tweaked the RTABench startup script to take a postgres connect string instead of deriving one from the output of Terraform. We also removed references to unsupported features on the individual platform, such as hypertables on vanilla postgres or continuous aggregates for TimescaleDB. These tweaks were minimal and were just with the execution script, not with the data, queries, or ingest logic of RTABench. You can see them for yourself here, where we added variants of RTABench for manually configured Postgres.</p>

<p>The client host was a Standard_D2s_v3 instance running Linux (ubuntu 24.04) with 2 vCPUs and 8GB RAM, deployed to the same Azure region as the database systems tested (Western Europe). In order to accommodate the data set, we increased the available disk to 128GB. The impact on load times when running a client host outside the database region was significant.</p>

<img src="images/image7.png" alt="Benchmark client host Azure instance details">
<img src="images/image8.png" alt="Azure instance disk configuration">

<p>We analyzed the results by feeding the benchmark output files to Claude, having a conversation, and double-checking that the conclusions were sound. That was fun. Here are some examples of these interactions:</p>

<p>First, we told Claude we worked in Marketing. This made it unreasonably excited about the Tiger Cloud results. We expected those, but the visual aid to your right illustrates the scale of the performance difference. Comparing milliseconds to minutes is no joke.</p>

<img src="images/image4.png" alt="Claude analysis showing devastating performance results">

<div class="milestone">
    <h3>Still Scrolling?</h3>
    <p>This is what 120 seconds of query latency feels like...</p>
</div>

<p>When running RTABench on Azure Managed Postgres with TimescaleDB extension, we got a little confused because the TimescaleDB version documented by Microsoft didn't match what was reported in the benchmark output. We were also not 100% sure that we had properly enabled the postgres extension for the test. It turns out we did, and the document we saw was just old.</p>

<img src="images/image5.png" alt="TimescaleDB version verification output">

<p>Also, Claude helped us evaluate the validity of the benchmark output so we didn't have to write scan output files looking for problems, errors or anomalies:</p>

<img src="images/image6.png" alt="Claude validation of benchmark results">

<h2>Running RTABench</h2>

<h3>Tiger Cloud Benchmark</h3>

<p>Sign up for Tiger Cloud and select a "Real-time analytics" service type. Spin up an 8 CPU 32GB dev service in Azure.</p>

<img src="images/image11.png" alt="Tiger Cloud service configuration">
<img src="images/image12.png" alt="Tiger Cloud compute size selection">

<p>Note the connection string or save the config:</p>

<img src="images/image13.png" alt="Tiger Cloud connection information">

<p>Start a Standard_D2s_v3 instance running Linux (ubuntu 24.04) with 2 vCPUs and 8GB RAM. Increase its disk size to accommodate the data set.</p>

<p>Git clone RTABench. This is a fork that takes a connection string for Postgres rather than spinning it up with Terraform. In the tigercloud-manual directory, edit benchmark.sh to provide your connection string.</p>

<p>To run the benchmark in the background and correct for inconsistent network connections between your cafe and your client host, use nohup and make it a background process:</p>

<p><code>nohup ./benchmark.sh > benchmark_output.log 2>&1 &</code></p>

<p>When done, in addition to a verbose report, the output should contain query times measured in very few seconds. One line per query, each query runs three times.</p>

<div class="milestone">
    <h3>Halfway There</h3>
    <p>Tiger Cloud would have finished 10,000 times by now.</p>
</div>

<h3>Azure Managed Postgres benchmark</h3>

<p>Now that we have a Tiger Cloud baseline, let's compare it to Azure Managed Postgres. We thought this was naive vanilla postgres, so we don't have any timescale specific features such as hypertables, let alone continuous aggregates or vectorized storage. We use the postgres test in RTAbench for this.</p>

<p>In Azure portal, create an Azure Database for Postgres Flexible Servers instance in the same region as the client host, matching the compute and storage for the Tiger Cloud instance. It's expensive, so don't leave it running for a long time.</p>

<p>You can view the connection string from the Azure portal as well. On the client host, in the postgres-manual subdirectory, edit benchmark.sh and provide the connection string. Use nohup and make it a background process:</p>

<p><code>nohup ./benchmark.sh > benchmark_output.log 2>&1 &</code></p>

<p>After a while, your output should contain values measured in quite a few seconds.</p>

<h3>TimescaleDB benchmark</h3>

<p>The TimescaleDB extension that's available with Azure Database for Postgres is the Apache 2 Licensed edition. It lacks row and columnar storage, native compression, and incremental continuous aggregates.</p>

<p>To enable the TimescaleDB extension on your Azure Database extension, click TIMESCALEDB on azure.extensions and shared_preload_libraries:</p>

<img src="images/image9.png" alt="Azure TimescaleDB extension configuration">
<img src="images/image10.png" alt="Azure shared preload libraries configuration">

<p>This will require a restart of postgres. That should take less than 5 minutes. In the timescale-manual directory, edit benchmark.sh and provide the connection string. Use nohup and make it a background process:</p>

<p><code>nohup ./benchmark.sh > benchmark_output.log 2>&1 &</code></p>

<p>Examine the output. You may see errors around unsupported functions such as continuous aggregates. This is to be expected due to the limitations with Apache Licensed TimescaleDB.</p>

<div class="milestone">
    <h3>75% Through</h3>
    <p>Almost at the end of this Vanilla Postgres query...</p>
</div>

<h3>Resetting Postgres</h3>

<p>Between tests, and if you need to restart due to an issue you can wipe Postgres clean as follows:</p>

<p><code>psql "$CONNECTION_STRING" -c "DROP SCHEMA public CASCADE;"<br>
psql "$CONNECTION_STRING" -c "CREATE SCHEMA public;"<br>
psql "$CONNECTION_STRING" -c "GRANT ALL ON SCHEMA public TO jwfbean;"<br>
psql "$CONNECTION_STRING" -c "GRANT ALL ON SCHEMA public TO public;"</code></p>

<h2>Raw Results</h2>

<p>After you run the benchmarks and have the output, you should see results approximating the below. If you don't feel like combing through the text files and reasoning for yourself, you can upload them to your favorite LLM and ask for summary results. This table is a direct output from Claude after manually clarifying the different supported features on each platform.</p>

<div class="metric-box">
    <h4>Query Performance Summary</h4>
    <p><strong>Most Queries:</strong> Tiger Cloud: 4-6ms | Azure + TimescaleDB: 1-5s | Vanilla Azure: 7s-2m</p>
    <p><strong>Medium Complexity:</strong> Tiger Cloud: 115-365ms | Azure + TimescaleDB: 1-30s | Vanilla Azure: 500ms-15s</p>
    <p><strong>High Complexity:</strong> Tiger Cloud: 670ms-2.6s | Azure + TimescaleDB: 10-35s | Vanilla Azure: 10-47s</p>
    <p><strong>Incremental Materialized Views:</strong> Tiger Cloud: 4-5ms | Others: Unsupported</p>
</div>

<p><strong>Note:</strong> Vanilla PostgreSQL showed interesting patterns - it was much slower on pure time-series queries (Q1-Q3) but sometimes competitive or better than TimescaleDB (not Tiger Cloud) on complex multi-table joins (Q8, Q11, Q17, Q25-Q26, Q28). We suspect that this is due to Azure native query planner optimizations in Azure Database for Postgres. This is the kind of mysterious and unexpected variation you get when you choose to self-manage your data infrastructure.</p>

<h3>Key Findings</h3>

<p><strong>Tiger Cloud is fastest on 30 out of 31 queries</strong></p>
<p>TimescaleDB wins on 1 trivial query (Q15 - simple aggregation on products table)</p>
<p>Vanilla PG wins on 0 queries</p>

<p><strong>Average Performance Gains:</strong></p>
<p>Median speedup: ~225x faster on Tiger Cloud<br>
Mean speedup: ~1,450x faster on Tiger Cloud<br>
Maximum speedup: ~7,200x faster (Q7)</p>

<h2>Conclusion</h2>

<h3>Aside: Azure Data Explorer</h3>

<p>Microsoft often recommends Azure Data Explorer for time-series workloads because of its rich user experience and its specific optimization for high-volume, timestamped data. We didn't run that benchmark at this time because RTABench doesn't yet support Kusto Query Language (AQL). Although the non standard query language is a pretty compelling reason to keep all your workloads, including time-series, in Postgres, we're pretty curious about how it would perform and hope to add support for it in the future.</p>

<p>This benchmark illustrates it and you can try it yourself. If you've been held back by slow queries, storage tradeoffs, or the limitations of the Apache 2 Edition on Azure Database for PostgreSQL, the combination of functionality is compelling:</p>

<ul>
    <li>Postgres you already know</li>
    <li>Full TimescaleDB feature set</li>
    <li>Azure-native deployment and billing</li>
</ul>

<h3>Resources:</h3>
<p>Azure documentation<br>
Get started on Azure Marketplace<br>
Questions or want to discuss your architecture? [Talk to solutions team]</p>
                </div>
            </div>
            
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-box min-bar"></div>
                    <span>Minimum Latency</span>
                </div>
                <div class="legend-item">
                    <div class="legend-box max-bar"></div>
                    <span>Maximum Latency</span>
                </div>
            </div>
        </div>
        
        <div class="final-section">
            <h2>üéâ You Made It! üéâ</h2>
            <p><strong>That scroll? That was 120 seconds of query latency.</strong></p>
            <p>Tiger Cloud delivers the same results in under 6 milliseconds.</p>
            <p style="margin-top: 30px;"><strong>That's over 20,000√ó faster.</strong></p>
            <a href="#" class="cta">Learn More About Tiger Cloud</a>
        </div>
    </div>
    
    <script>
        window.addEventListener('scroll', () => {
            const windowHeight = window.innerHeight;
            const documentHeight = document.documentElement.scrollHeight;
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            const scrollPercent = (scrollTop / (documentHeight - windowHeight)) * 100;
            
            document.getElementById('progressBar').style.width = scrollPercent + '%';
            
            const scrollHint = document.getElementById('scrollHint');
            if (scrollPercent > 50) {
                scrollHint.style.display = 'none';
            } else {
                scrollHint.style.display = 'block';
            }
        });
    </script>
</body>
</html>
